{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"RISCV-IM","text":""},{"location":"#_1","title":"\u9879\u76ee\u7b80\u4ecb","text":""},{"location":"API/websocket/","title":"IM Websocket Protocol","text":""},{"location":"API/websocket/#_1","title":"\u5173\u952e\u5b57\u89e3\u91ca","text":"<p>mtype \u2014\u2014 \u6d88\u606f\u7c7b\u578b\uff0c\u53ef\u80fd\u662f\"text\", \"gif\", \"image\", \"file\", \"video\", \"audio\" ,\"multi\",\"operation\"</p> <p>rtype \u2014\u2014 \u7fa4\u804a\u7c7b\u578b\uff0c\u53ef\u80fd\u662f\"group\", \"private_chat\", \"self\"</p> <p>\u5de6\u4fa7\uff1a\u5373\u524d\u7aef\u9875\u9762\u4e2d\u7684group_list</p> <p>\u53f3\u4fa7\uff1a\u5373\u524d\u7aef\u9875\u9762\u4e2d\u7684message_list</p> <p>\u6210\u5458\u9875\uff1a\u663e\u793a\u7fa4\u804a\u6210\u5458\u7684\u9875</p> <p>\u7528\u6237\u9875\uff1a\u663e\u793a\u7528\u6237\u4fe1\u606f\u7684\u9875</p>"},{"location":"API/websocket/#serialize","title":"Serialize","text":""},{"location":"API/websocket/#message","title":"MESSAGE","text":"<pre><code>{\n    \"message_id\": int,\n    \"sender_id\": int,\n    \"receiver_id\": int,\n    \"index\": int, \n    \"msg_op\":int,\n    \"content\": str,\n    \"read\": bool,\n    \"recalled\": bool,\n    \"time\": str, \n    \"mtype\": str, \n    \"room_id\":int\n}\n</code></pre>"},{"location":"API/websocket/#room","title":"ROOM","text":"<pre><code>{\n    \"room_id\": int,\n    \"room_name\": str,\n    \"create_time\": str,\n    \"rtype\": str,\n    \"image\": str,\n    \"room_length\": int, \n    \"owner_id\": int,\n    \"admin_ids\": list,\n    \"members\": list[USER],\n}\n</code></pre>"},{"location":"API/websocket/#user","title":"USER","text":"<pre><code>{\n    \"user_id\": int,\n    \"user_name\": str,\n    \"email\": str,\n    \"image\": str,\n    \"self_room_id\": int\n}\n</code></pre>"},{"location":"API/websocket/#websocket","title":"\u8fde\u63a5websocket","text":"<pre><code>// \u524d\u7aefjs\nFullWSUrl = 'ws://'\n            + window.location.host // \u672c\u5730 \u82e5\u90e8\u7f72\u5219\u76f8\u5e94\u66f4\u6362\n            + ws_url // \u540e\u7aef\u4f1a\u901a\u8fc7http\u76f8\u5e94\u53d1\"ws_url\"\u5b57\u6bb5\nconst chatSocket = new WebSocket(FullWSUrl, [], {\n    headers: {\n        'Authorization': jwtToken // \u540e\u7aef\u7b7e\u53d1\n    }\n});\n</code></pre>"},{"location":"API/websocket/#ws-api","title":"WS API\u5217\u8868","text":"<pre><code>CREATE_ROOM = 0 # \u521b\u5efa\u7fa4\nCREATE_MESSAGE = 1 # \u521b\u5efa\u6d88\u606f\nINVITE_ROOM_MEMBER = 2 # \u7fa4\u4e3b\u6216\u7fa4\u7ba1\u7406\u5458\u9080\u8bf7\u65b0\u7684\u7fa4\u6210\u5458\nEXIT_ROOM = 3 # \u9000\u51fa\u7fa4\nKICK_ROOM_MEMBER = 4 # \u8e22\u51fa\u7fa4\u804a\nCHANGE_ROOM_NAME = 5 # \u4fee\u6539\u7fa4\u540d\nCHANGE_ROOM_IMAGE = 6 # \u4fee\u6539\u7fa4\u5934\u50cf\nDELETE_ROOM = 7 # \u89e3\u6563\u7fa4\nDELETE_MESSAGE = 8 # \u5220\u9664\u6d88\u606f\nRECALL_MESSAGE = 9 # \u64a4\u56de\u6d88\u606f\nSET_ADMIN = 10 # \u8bbe\u7f6e\u7ba1\u7406\u5458\nREMOVE_ADMIN = 11 # \u53d6\u6d88\u7ba1\u7406\u5458\nTRASFER_OWNER = 12 # \u8f6c\u8ba9\u7fa4\u4e3b\nCHANGE_ANNOUCEMENT = 13 # \u4fee\u6539\u7fa4\u516c\u544a\nSEND_FRIEND_REQUEST = 14 # \u53d1\u9001\u597d\u53cb\u8bf7\u6c42\nPROCESS_FRIEND_REQUEST = 15 # \u5904\u7406\u597d\u53cb\u8bf7\u6c42\nDELETE_FRIEND = 16 # \u5220\u9664\u597d\u53cb\nLOAD_ROOMS = 17 # \u52a0\u8f7d\u6240\u6709\u7fa4\u804a\u4fe1\u606f\nLOAD_HISTORY_MESSAGES = 18 # \u52a0\u8f7d\u67d0\u4e00\u4e2a\u7fa4\u804a\u7684\u6240\u6709\u5386\u53f2\u6d88\u606f\nREAD_ALL_MESSAGES = 19 # \u9605\u8bfb\u4e86\u67d0\u4e00\u4e2a\u7fa4\u804a\u7684\u6240\u6709\u6d88\u606f\nLOAD_CONTACTS = 20 # \u52a0\u8f7d\u6240\u6709\u8054\u7cfb\u4eba\u4fe1\u606f\nDO_NOT_DISTURB = 21 # \u8bbe\u7f6e\u6d88\u606f\u514d\u6253\u6270\nALLOW_DISTURB = 22 # \u64a4\u9500\u6d88\u606f\u514d\u6253\u6270\nSET_AS_TOP = 23 # \u7f6e\u9876\u804a\u5929\nREMOVE_FROM_TOP = 24 # \u53d6\u6d88\u7f6e\u9876\u804a\u5929\nREVIEW_MEMBERSHIP_REQUESTS = 25 # \u5ba1\u6838\u5165\u7fa4\u8bf7\u6c42\nCANCEL_ACCOUNT = 26 # \u7528\u6237\u6ce8\u9500\nGET_USER_INFO = 27 # \u67e5\u770b\u7528\u6237\u4fe1\u606f\nSEND_INVITE_ROOM_MEMBER_REQUEST = 28 # \u666e\u901a\u7fa4\u6210\u5458\u9080\u8bf7\u65b0\u7684\u7fa4\u6210\u5458 \n</code></pre>"},{"location":"API/websocket/#0-","title":"0 - \u521b\u5efa\u7fa4","text":""},{"location":"API/websocket/#_2","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<ol> <li>\u7528\u6237\u70b9\u51fb\u4e86\"rtype\"\u4e3a \"private_chat\"\u7684\u7fa4\u804a\u6210\u5458\u9875\u7684 \"+\" \u6309\u94ae</li> <li>\u7528\u6237\u70b9\u51fb\u4e86\u521b\u5efa\u7fa4\u804a\u7684 \"+\" \u6309\u94ae</li> </ol>"},{"location":"API/websocket/#_3","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\": 0,\n    \"data\": {\n        \"rtype\": \"group\",\n        \"owner_id\":1,\n        \"receivers_list\":[1, 2, 3, 4]\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_4","title":"\u54cd\u5e94","text":"<p>\u79c1\u804a</p> <pre><code>{\n    \"op\": 0,\n    \"data\": {\n        \"rtype\": \"private_chat\",\n         \"owner_id\":1,\n        \"receivers_list\":[1, 2],\n        \"room_id\":1,\n        \"room_name\":\"\",\n         \"room_image\":\"\",\n         \"related_message\":\n            {\n                \"mtype\":\"operation\",\n                \"msg_op\":0,\n                \"room_id\":1,\n                \"sender_id\":1,\n                \"receiver_id\":2, \n                \"content\":\"\",\n                \"index\":20,\n                \"message_id\":\"\u4f60\u4eec\u5df2\u7ecf\u6210\u4e3a\u597d\u53cb\uff0c\u5f00\u59cb\u804a\u5929\u5427\uff01\",\n                \"time\":\"\",\n                \"recalled\":false,\n                \"read\":true\n            }\n    }\n}\n</code></pre> <p>\u7fa4\u804a</p> <pre><code>{\n    \"op\": 0,\n    \"data\": {\n        \"rtype\": \"group\",\n         \"owner_id\":1,\n        \"receivers_list\":[1, 2, 3, 4],\n        \"room_id\":1,\n        \"room_name\":\"\",\n         \"room_image\":\"\",\n         \"related_message\":\n        {\n            \"mtype\":\"operation\",\n            \"msg_op\":0,\n            \"room_id\":1,\n            \"sender_id\":1,\n            \"receiver_id\":2, \n            \"content\":\"... \u521b\u5efa\u4e86\u7fa4\u804a\uff0c\u7fa4\u804a\u6210\u5458\u6709\uff1a...\",\n            \"index\":20,\n            \"message_id\":100,\n            \"time\":\"\",\n             \"recalled\":false,\n             \"read\":true\n        }\n    }\n}\n</code></pre> <p>\u81ea\u5df1\u7684\u804a\u5929</p> <pre><code>{\n    \"op\": 0,\n    \"data\": {\n        \"rtype\": \"group\",\n         \"owner_id\":1,\n        \"receivers_list\":[1],\n        \"room_id\":1,\n        \"room_name\":\"\",\n         \"room_image\":\"\",\n         \"related_message\":\n            {\n                \"mtype\":\"operation\",\n                \"msg_op\":0,\n                \"room_id\":1,\n                \"sender_id\":1,\n                \"receiver_id\":1,\n                \"content\":\"\u60a8\u5728\u8fd9\u91cc\u53ef\u4ee5\u6536\u5230\u5176\u4ed6\u7528\u6237\u7684\u597d\u53cb\u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u53d1\u6d88\u606f\u7ed9\u81ea\u5df1\",\n                \"index\":20,\n                \"message_id\":100,\n                \"time\":\"\",\n                 \"recalled\":false,\n                 \"read\":true\n            }\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_5","title":"\u5f02\u5e38\u54cd\u5e94","text":"<ol> <li>\u5982\u679c <code>response[\"data\"][\"room_id\"]</code> \u4e3a -1, \u5219\u8bf4\u660e\u56e0\u4e3a\u6709\u4e9b\u7528\u6237\u4e0d\u5b58\u5728\u800c\u521b\u5efa\u5931\u8d25</li> <li>\u5982\u679c <code>response[\"data\"][\"error\"]</code>\u5b57\u6bb5\u5b58\u5728\u4e14\u975e\u7a7a\uff0c\u5219\u6709\u5404\u79cd\u5176\u4ed6\u5f02\u5e38</li> </ol>"},{"location":"API/websocket/#1-","title":"1 - \u521b\u5efa\u6d88\u606f","text":""},{"location":"API/websocket/#_6","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b      \u7528\u6237\u5728\u8f93\u5165\u6846\u53d1\u9001\u6d88\u606f</p>"},{"location":"API/websocket/#_7","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":1,\n    \"data\": {\n        \"mtype\":\"text\",\n        \"rtype\":\"group\",\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"content\":\"\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_8","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":1,\n    \"data\": {\n        \"mtype\":\"text\",\n        \"rtype\":\"group\",\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"content\":\"\",\n        \"related_message\":{\n            \"mtype\":\"text\",\n            \"msg_op\":1,\n            \"room_id\":1,\n            \"sender_id\":1,\n            \"content\":\"\",\n            \"index\":20,\n            \"message_id\":1,\n            \"time\":\"\",\n             \"recalled\":false,\n             \"read\":false\n        }\n    }\n}\n</code></pre>"},{"location":"API/websocket/#2-","title":"2 - \u7fa4\u4e3b\u6216\u7fa4\u7ba1\u7406\u5458\u9080\u8bf7\u65b0\u7684\u7fa4\u6210\u5458","text":""},{"location":"API/websocket/#_9","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7fa4\u4e3b\u6216\u7fa4\u7ba1\u7406\u5458\u70b9\u51fb\u4e86 rtype \u4e3a \"group\" \u7684\u7fa4\u804a\u6210\u5458\u9875\u7684 \"+\" \u6309\u94ae\uff0c\u7136\u540e\u9009\u4e2d\u4e00\u4e2a\u81ea\u5df1\u7684\u597d\u53cb</p>"},{"location":"API/websocket/#_10","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\": 2,\n    \"data\": {\n        \"room_id\": 1,\n        \"inviter_id\": 1,\n        \"invitee_id\":2\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_11","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\": 2,\n    \"data\": {\n        \"room_id\": 1,\n        \"inviter_id\": 1,\n        \"invitee_id\":2,\n        \"room_name\":\"\",\n        \"time\":\"\",\n        \"related_message\":\"... \u9080\u8bf7 ... \u8fdb\u5165\u7fa4\u804a\",\n    }\n}\n</code></pre>"},{"location":"API/websocket/#3-","title":"3 - \u9000\u51fa\u7fa4","text":""},{"location":"API/websocket/#_12","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u5728\u7fa4\u804a\u6210\u5458\u9875\u70b9\u51fb\"\u5220\u9664\u5e76\u9000\u51fa\u7fa4\u804a\"\u6309\u94ae</p>"},{"location":"API/websocket/#_13","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":3,\n    \"data\":{\n        \"room_id\":1,\n        \"old_member_id\":1,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_14","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":3,\n    \"data\":{\n        \"room_id\":1,\n        \"old_member_id\":1,\n        \"related_message\":\"... \u9000\u51fa\u7fa4\u804a\",\n        \"time\": \"\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#4-","title":"4 - \u8e22\u51fa\u7fa4\u804a","text":""},{"location":"API/websocket/#_15","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7fa4\u4e3b\u3001\u7fa4\u7ba1\u7406\u5458\u70b9\u51fb\u7fa4\u804a\u6210\u5458\u9875\u7684 \"-\" \u6309\u94ae</p>"},{"location":"API/websocket/#_16","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":4,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"kicked_id\":2,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_17","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":4,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"kicked_id\":2,\n        \"time\": \"\",\n        \"related_message\": \"... \u88ab\u8e22\u51fa\u7fa4\u804a\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#5-","title":"5 - \u4fee\u6539\u7fa4\u540d","text":""},{"location":"API/websocket/#_18","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7fa4\u6210\u5458\u70b9\u51fb\u7fa4\u804a\u6210\u5458\u9875\u7684\"\u4fee\u6539\u7fa4\u540d\"\u6309\u94ae</p>"},{"location":"API/websocket/#_19","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":5,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"new_name\":\"\u9510\u79d15\u4ea4\u6d41\u7fa4\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_20","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":5,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"new_name\":\"\u9510\u79d15\u4ea4\u6d41\u7fa4\",\n        \"related_message\":\"... \u5c06\u7fa4\u540d\u7531 ... \u4fee\u6539\u4e3a ...\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#6-","title":"6 - \u4fee\u6539\u7fa4\u5934\u50cf","text":""},{"location":"API/websocket/#_21","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7fa4\u6210\u5458\u70b9\u51fb\u7fa4\u804a\u6210\u5458\u9875\u7684\"\u4fee\u6539\u7fa4\u5934\u50cf\"\u6309\u94ae</p>"},{"location":"API/websocket/#_22","title":"\u8bf7\u6c42","text":"<p>\u8fd8\u6ca1\u60f3\u597d\uff0c\u4e4b\u540e\u8865\u5168</p>"},{"location":"API/websocket/#_23","title":"\u54cd\u5e94","text":""},{"location":"API/websocket/#7-","title":"7 - \u89e3\u6563\u7fa4","text":""},{"location":"API/websocket/#_24","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7fa4\u4e3b\u70b9\u51fb rtype \u4e3a \"group\" \u7684\u7fa4\u804a\u6210\u5458\u9875\u4e2d\u7684\"\u89e3\u6563\u7fa4\u804a\" \u6309\u94ae</p>"},{"location":"API/websocket/#_25","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":7,\n    \"data\":{\n        \"room_id\":1,\n        \"rtype\":\"group\",\n        \"sender_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_26","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":7,\n    \"data\":{\n        \"room_id\":1,\n        \"rtype\":\"group\",\n        \"sender_id\":1,\n        \"related_message\":\"\u7fa4\u4e3b ... \u5df2\u89e3\u6563\u7fa4\u804a\",\n        \"time\": \"\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#8-","title":"8 - \u5220\u9664\u6d88\u606f","text":""},{"location":"API/websocket/#_27","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u53f3\u952e\u67d0\u6d88\u606f\uff0c\u70b9\u51fb\u5220\u9664</p>"},{"location":"API/websocket/#_28","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":8,\n    \"data\":{\n        \"room_id\":1,\n        \"rtype\":\"group\",\n        \"sender_id\":1,\n        \"message_id\":10000\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_29","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":8,\n    \"data\":{\n        \"room_id\":1,\n        \"rtype\":\"group\",\n        \"sender_id\":1,\n        \"message_id\":10000,\n        \"time\":\"\",\n    }\n}\n</code></pre>"},{"location":"API/websocket/#9-","title":"9 - \u64a4\u56de\u6d88\u606f","text":""},{"location":"API/websocket/#_30","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u7528\u6237\u53f3\u952e\u9009\u62e9\u6d88\u606f\uff0c\u70b9\u51fb\u64a4\u56de</p>"},{"location":"API/websocket/#_31","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":9,\n    \"data\":{\n        \"room_id\":1,\n        \"rtype\":\"group\",\n        \"sender_id\":1,\n        \"index\":500\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_32","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":9,\n    \"data\":{\n        \"room_id\":1,\n        \"rtype\":\"group\",\n        \"sender_id\":1,\n        \"index\":500,\n        \"message_id\":10000,\n        \"time\":\"\",\n    }\n}\n</code></pre>"},{"location":"API/websocket/#10-","title":"10 - \u8bbe\u7f6e\u7ba1\u7406\u5458","text":""},{"location":"API/websocket/#_33","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u7fa4\u4e3b\u5728\u7fa4\u804a\u6210\u5458\u8868\u4e2d\u53f3\u952e\u67d0\u666e\u901a\u6210\u5458\uff0c\u70b9\u51fb\u201c\u8bbe\u7f6e\u4e3a\u7ba1\u7406\u5458\u201d</p>"},{"location":"API/websocket/#_34","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":10,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"new_admin_id\":2,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_35","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":10,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"new_admin_id\":2,\n        \"time\":\"\",\n        \"related_message\":\"\u7fa4\u4e3b ... \u5c06 ... \u6dfb\u52a0\u4e3a\u7fa4\u7ba1\u7406\u5458\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#11-","title":"11 - \u53d6\u6d88\u7ba1\u7406\u5458","text":""},{"location":"API/websocket/#_36","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u7fa4\u4e3b\u5728\u7fa4\u804a\u6210\u5458\u8868\u4e2d\u53f3\u952e\u67d0\u7ba1\u7406\u5458\uff0c\u70b9\u51fb\u201c\u53d6\u6d88\u7fa4\u7ba1\u7406\u5458\u201d</p>"},{"location":"API/websocket/#_37","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":11,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"old_admin_id\":2,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_38","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":11,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"old_admin_id\":2,\n        \"time\":\"\",\n        \"related_message\":\"\u7fa4\u4e3b ... \u53d6\u6d88\u4e86 ... \u7684\u7fa4\u7ba1\u7406\u5458\u8d44\u683c\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#12-","title":"12 - \u8f6c\u8ba9\u7fa4\u4e3b","text":""},{"location":"API/websocket/#_39","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u7fa4\u4e3b\u5728\u7fa4\u804a\u6210\u5458\u8868\u4e2d\u53f3\u952e\u67d0\u7fa4\u6210\u5458\uff0c\u70b9\u51fb\u201c\u8f6c\u8ba9\u7fa4\u4e3b\u201d\u3002\uff08\u6700\u597d\u6709\u4e2a\u786e\u5b9a\u5f39\u7a97\uff09</p>"},{"location":"API/websocket/#_40","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":12,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"new_owner_id\":2\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_41","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":12,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"new_owner_id\":2,\n        \"time\":\"\",\n        \"related_message\":\"...\u5df2\u6210\u4e3a\u65b0\u7fa4\u4e3b\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#13-","title":"13 - \u4fee\u6539\u7fa4\u516c\u544a","text":""},{"location":"API/websocket/#_42","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u7fa4\u4e3b\u6216\u7fa4\u7ba1\u7406\u5458\u5728\u6210\u5458\u9875\u7684\u7fa4\u516c\u544a\u4e2d\u70b9\u51fb\u7f16\u8f91\u6309\u94ae\uff0c\u4fee\u6539\u540e\uff0c\u70b9\u51fb\u4fdd\u5b58</p>"},{"location":"API/websocket/#_43","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":13,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"announcement\":\"\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_44","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":13,\n    \"data\":{\n        \"room_id\":1,\n        \"sender_id\":1,\n        \"announcement\":\"\",\n        \"time\":\"\",\n        \"related_message\":\"@\u6240\u6709\u4eba\uff1a\\n ...\",\n    }\n}\n</code></pre>"},{"location":"API/websocket/#14-","title":"14 - \u53d1\u9001\u597d\u53cb\u8bf7\u6c42","text":""},{"location":"API/websocket/#_45","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   inviter\u5728\u6dfb\u52a0\u597d\u53cb\u754c\u9762\uff0c\u6307\u5b9a\u4e86id\u548cname\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\uff0c\u7136\u540e\u70b9\u51fb\u201c\u53d1\u9001\u597d\u53cb\u7533\u8bf7\u201d\u6309\u94ae</p>"},{"location":"API/websocket/#_46","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":14,\n    \"data\":{\n        \"inviter_id\":1, \n        \"invitee_name\":\"\",\n        \"invitee_id\":2,\n        \"hello_content\":\"\u4f60\u597d\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_47","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":14,\n    \"data\":{\n        \"inviter_id\":1, \n        \"invitee_name\":\"\",\n        \"invitee_id\":2,\n        \"hello_content\":\"\u4f60\u597d\uff0c\u6211\u6709\u95ee\u9898\u60f3\u8bf7\u6559\u4e00\u4e0b\",\n        \"rtype\":\"self\",\n        \"related_message\":{\n            \"mtype\":\"operation\",\n            \"msg_op\":14,\n            \"room_id\":1,\n            \"sender_id\":1,\n            \"receiver_id\":2, \n            \"content\":\"[\u7528\u6237 ... \u60f3\u7533\u8bf7\u6210\u4e3a\u60a8\u7684\u597d\u53cb] \u4f60\u597d\uff0c\u6211\u6709\u95ee\u9898\u60f3\u8bf7\u6559\u4e00\u4e0b\",\n            \"index\":20,\n            \"message_id\":1,\n            \"time\":\"\",\n             \"recalled\":false,\n             \"read\":false\n        }\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_48","title":"\u5f02\u5e38\u54cd\u5e94","text":"<ol> <li>\u54cd\u5e94 data \u5b57\u6bb5\u7684 invitee_id \u4e3a -1\uff0c\u8bf4\u660e\u627e\u4e0d\u5230invitee</li> <li>\u9664\u6b64\u4e4b\u5916\u82e5\u53d1\u751f\u5176\u4ed6\u9519\u8bef\uff0c <code>response [\"data\"][\"error\"]</code>\u5b58\u5728\u4e14\u975e\u7a7a</li> </ol>"},{"location":"API/websocket/#15-","title":"15 - \u5904\u7406\u597d\u53cb\u8bf7\u6c42","text":""},{"location":"API/websocket/#_49","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   invitee\u5728\u5904\u7406\u597d\u53cb\u8bf7\u6c42\u754c\u9762\uff0c\u70b9\u51fb\u201c\u540c\u610f\u201d\u6216\u201c\u62d2\u7edd\u201d\u6309\u94ae</p>"},{"location":"API/websocket/#_50","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":15,\n    \"data\":{\n        \"invitee_id\":2, \n        \"inviter_id\":1,\n        \"is_accept\":true\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_51","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":15,\n    \"data\":{\n        \"invitee_id\":2,\n        \"inviter_id\":1,\n        \"is_accept\": true,\n        \"related_message\":{\n            \"mtype\":\"operation\",\n            \"msg_op\":14,\n            \"room_id\":1,\n            \"sender_id\":1,\n            \"receiver_id\": 2, \n            \"content\":\"[\u5904\u7406\u597d\u53cb\u8bf7\u6c42] \u7528\u6237 ... \u63a5\u6536/\u62d2\u7edd\u4e86\u60a8\u7684\u597d\u53cb\u7533\u8bf7\",\n            \"index\":20,\n            \"message_id\":1,\n            \"time\":\"\",\n             \"recalled\":false,\n             \"read\":false\n        }\n    }\n}\n</code></pre> <p>*\u52a0\u4e0a\u597d\u53cb\u540e\uff0c\u540e\u7aef\u4f1a\u81ea\u52a8\u521b\u5efa\u79c1\u804a\uff0c\u5e76\u53d1\u7ed9\u524d\u7aef\uff0c\u53c2\u89c1\u201c\u521b\u5efa\u7fa4\u201d\u54cd\u5e94\u683c\u5f0f</p>"},{"location":"API/websocket/#16-","title":"16 - \u5220\u9664\u597d\u53cb","text":""},{"location":"API/websocket/#_52","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   deletor\u5728\u79c1\u804a\u9875\u9762\u7684\u6210\u5458\u9875\u4e2d\uff0c\u70b9\u51fb\u201c\u6e05\u7a7a\u8bb0\u5f55\u5e76\u5220\u9664\u597d\u53cb\u201d\u6309\u94ae</p>"},{"location":"API/websocket/#_53","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":16,\n    \"data\":{\n        \"deleter_id\": 1,\n        \"deleted_id\": 2\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_54","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":16,\n    \"data\":{\n        \"deleter_id\": 1,\n        \"deleted_id\": 2,\n        \"time\":\"\",\n        \"related_message\":\"... \u73b0\u5728\u8fd8\u4e0d\u662f\u60a8\u7684\u597d\u53cb\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#17-","title":"17 - \u52a0\u8f7d\u6240\u6709\u7fa4\u804a\u57fa\u672c\u4fe1\u606f","text":""},{"location":"API/websocket/#_55","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u521a\u767b\u5f55</p>"},{"location":"API/websocket/#_56","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":17,\n    \"data\":{\n        \"sender_id\": 1,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_57","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":17,\n    \"data\":{\n        \"sender_id\": 1,\n        \"rooms\":[\n              {\n                \"room_id\":1,\n                \"room_name\":\"\",\n                \"rtype\": \"group\",\n                \"on_top\": true,  \n                \"unread_cnt\": 3,\n                \"latest_update_time\":\"\",\n                \"latest_message\":{\n                    \"message_id\":500,\n                    \"sender_id\":1,\n                    \"receiver_id\":1,\n                    \"mtype\":\"text\",\n                    \"content\":\"\",\n                    \"read\":true,\n                    \"recalled\":false,\n                }\n              },\n                {\n                    \"room_id\":2,\n                    \"room_name\":\"\",\n                    \"rtype\": \"private_chat\",\n                    \"on_top\": false,\n                    \"unread_cnt\": 3,\n                    \"latest_update_time\":\"\",\n                    \"latest_message\":{\n                        \"message_id\":501,\n                        \"sender_id\":1,\n                        \"receiver_id\":2,\n                        \"mtype\":\"text\",\n                        \"content\":\"\",\n                        \"read\":true,\n                        \"recalled\":false\n                  }\n               }\n               ...\n        ]\n    }\n}\n</code></pre>"},{"location":"API/websocket/#18-","title":"18 -  \u52a0\u8f7d\u67d0\u4e00\u4e2a\u7fa4\u804a\u7684\u6240\u6709\u5386\u53f2\u6d88\u606f","text":""},{"location":"API/websocket/#_58","title":"\u53d1\u8bf7\u6c42\u6761\u4ef6","text":"<p>\u200b   \u767b\u5f55\u540e\u7b2c\u4e00\u6b21\u5728\u5de6\u4fa7\u70b9\u51fb\u67d0\u7fa4\u804a</p>"},{"location":"API/websocket/#_59","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":18,\n    \"data\":{\n        \"sender_id\": 1,\n        \"room_id\": 1,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_60","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":18,\n    \"data\":{\n        \"sender_id\": 1,\n        \"room_id\": 1,\n        \"messages\": [\n            {\n                 \"mtype\":\"text\",\n                 \"rtype\":\"group\",\n                 \"room_id\":1,\n                 \"sender_id\":1,\n                 \"content\":\"\",\n                 \"index\":\"\",\n                 \"message_id\":\"\",\n                 \"time\":\"\",\n            },\n            {\n                 \"mtype\":\"text\",\n                 \"rtype\":\"group\",\n                 \"room_id\":1,\n                 \"sender_id\":1,\n                 \"content\":\"\",\n                 \"index\":\"\",\n                 \"message_id\":\"\",\n                 \"time\":\"\",\n            },\n            ...\n        ]\n    }\n}\n</code></pre>"},{"location":"API/websocket/#19-","title":"19 - \u9605\u8bfb\u4e86\u67d0\u4e00\u4e2a\u7fa4\u804a\u7684\u6240\u6709\u6d88\u606f","text":""},{"location":"API/websocket/#_61","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u70b9\u51fb\u5de6\u4fa7\u67d0\u672a\u8bfb\u6d88\u606f\u6570\u4e0d\u4e3a0\u7684\u7fa4\u804a</p>"},{"location":"API/websocket/#_62","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":19,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_63","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":19,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#20-","title":"20 - \u52a0\u8f7d\u6240\u6709\u8054\u7cfb\u4eba\u4fe1\u606f","text":""},{"location":"API/websocket/#_64","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u521a\u767b\u5f55</p>"},{"location":"API/websocket/#_65","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":20,\n    \"data\":{\n        \"sender_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_66","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":20,\n    \"data\":{\n        \"sender_id\":1,\n        \"contacts\":[\n            {\n                \"user_id\":2,\n                \"user_name\":\"\",\n                \"email\":\"\",\n                \"image\":\"\",\n            },\n            {\n                \"user_id\":3,\n                \"user_name\":\"\",\n                \"email\":\"\",\n                \"image\":\"\",                \n            }\n            ...\n        ]\n    }\n}\n</code></pre>"},{"location":"API/websocket/#21-","title":"21 - \u8bbe\u7f6e\u6d88\u606f\u514d\u6253\u6270","text":""},{"location":"API/websocket/#_67","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u5728\u7fa4\u804a\u6210\u5458\u9875\u4e2d\u52fe\u9009\u201c\u6d88\u606f\u514d\u6253\u6270\u201d</p>"},{"location":"API/websocket/#_68","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":21,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_69","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":21,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#22-","title":"22 - \u53d6\u6d88\u6d88\u606f\u514d\u6253\u6270","text":""},{"location":"API/websocket/#_70","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u5728\u7fa4\u804a\u6210\u5458\u9875\u4e2d\u53d6\u6d88\u52fe\u9009\u201c\u6d88\u606f\u514d\u6253\u6270\u201d</p>"},{"location":"API/websocket/#_71","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":22,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_72","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":22,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#23-","title":"23 - \u7f6e\u9876\u804a\u5929","text":""},{"location":"API/websocket/#_73","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u5728\u7fa4\u804a\u6210\u5458\u9875\u4e2d\u52fe\u9009\u201c\u7f6e\u9876\u804a\u5929\u201d</p>"},{"location":"API/websocket/#_74","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":23,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_75","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":23,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#24-","title":"24 - \u53d6\u6d88\u7f6e\u9876\u804a\u5929","text":""},{"location":"API/websocket/#_76","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u7528\u6237\u5728\u7fa4\u804a\u6210\u5458\u9875\u4e2d\u53d6\u6d88\u52fe\u9009\u201c\u7f6e\u9876\u804a\u5929\u201d</p>"},{"location":"API/websocket/#_77","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":24,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_78","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":24,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1\n    }\n}\n</code></pre>"},{"location":"API/websocket/#25-","title":"25 - \u5ba1\u6838\u5165\u7fa4\u8bf7\u6c42","text":""},{"location":"API/websocket/#_79","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u5bf9\u4e8e\u7fa4\u4e3b\u548c\u7fa4\u7ba1\u7406\u5458\uff0c\"... \u8bf7\u6c42\u9080\u8bf7 ... \u8fdb\u5165\u7fa4\u804a\"\u540e\u9762\u5e26\u6709 \"\u6279\u51c6/\u4e0d\u6279\u51c6\"\u6309\u94ae\uff0c\u6309\u4e0b\u6309\u94ae\u65f6\u53d1\u8bf7\u6c42</p>"},{"location":"API/websocket/#_80","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":25,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1,\n        \"inviter_id\":2,\n        \"invitee_id\":3,\n        \"is_accept\":true\n    }   \n}\n</code></pre>"},{"location":"API/websocket/#_81","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":25,\n    \"data\":{\n        \"sender_id\":1,\n        \"room_id\":1,\n        \"inviter_id\":2,\n        \"invitee_id\":3,\n        \"is_accept\":true,\n        \"time\":\"\",\n        \"related_message\":\"... \u5df2\u6279\u51c6 ... \u52a0\u5165\u7fa4\u804a/ ... \u62d2\u7edd ... \u52a0\u5165\u7fa4\u804a\"\n    }   \n}\n</code></pre>"},{"location":"API/websocket/#26-","title":"26 - \u7528\u6237\u6ce8\u9500","text":""},{"location":"API/websocket/#_82","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u5728\u81ea\u5df1\u7684\u7528\u6237\u9875\u4e2d\u70b9\u51fb\u201c\u6ce8\u9500\u8d26\u53f7\u201d\u6309\u94ae\u5e76\u70b9\u201c\u786e\u5b9a\u201d</p>"},{"location":"API/websocket/#_83","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":26,\n    \"data\":{\n        \"sender_id\":1,\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_84","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":26,\n    \"data\":{\n        \"sender_id\":1,\n        \"time\":\"\",\n    }\n}\n</code></pre>"},{"location":"API/websocket/#27-","title":"27 - \u67e5\u770b\u7528\u6237\u4fe1\u606f","text":""},{"location":"API/websocket/#_85","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u529f\u80fd\u548chttp\u8bf7\u6c42\u4e2d\u7684\u67e5\u770b\u7528\u6237\u4fe1\u606f\u5b8c\u5168\u4e00\u81f4\uff0c\u4e3a\u65b9\u4fbf\u524d\u7aef\uff0c\u8fd9\u91cc\u4e5f\u63d0\u4f9b\u4e86websocket\u8bf7\u6c42</p>"},{"location":"API/websocket/#_86","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\":27,\n    \"data\":{\n        \"sender_id\":1,\n        \"searching_id\":2,\n        \"searching_name\":\"\"\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_87","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\":27,\n    \"data\":{\n        \"sender_id\":1,\n        \"searching_id\":2,\n        \"searching_name\":\"\",\n        \"related_user\":{\n            \"user_id\":2,\n            \"user_name\":\"\",\n            \"email\":\"\",\n            \"image\":\"\",\n            \"self_room_id\":1\n        }\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_88","title":"\u5f02\u5e38\u54cd\u5e94 &amp; \u5907\u6ce8","text":"<ol> <li>\u5982\u679c\u6ca1\u6709\u627e\u5230user\uff0c\u5219searching_id\u4e3a-1</li> <li>searching_id\u548csearching_name\u8bf7\u6c42\u4e2d\u6709\u4e00\u4e2a\u5c31\u884c\uff0c\u53e6\u4e00\u4e2akey\u53ef\u4ee5\u4e0d\u5199\uff0c\u5982\u679c\u90fd\u5b58\u5728\uff0c\u4ee5searching_id\u6307\u5b9a\u7684\u7528\u6237\u4e3a\u51c6</li> </ol>"},{"location":"API/websocket/#28-","title":"28 - \u666e\u901a\u7fa4\u6210\u5458\u9080\u8bf7\u65b0\u7684\u7fa4\u6210\u5458","text":""},{"location":"API/websocket/#_89","title":"\u53d1\u8bf7\u6c42\u65f6\u673a","text":"<p>\u200b   \u666e\u901a\u7fa4\u6210\u5458\u70b9\u51fb\u4e86 rtype \u4e3a \"group\" \u7684\u7fa4\u804a\u6210\u5458\u9875\u7684 \"+\" \u6309\u94ae\uff0c\u7136\u540e\u9009\u4e2d\u4e86\u4e00\u4e2a\u81ea\u5df1\u7684\u597d\u53cb</p>"},{"location":"API/websocket/#_90","title":"\u8bf7\u6c42","text":"<pre><code>{\n    \"op\": 28,\n    \"data\": {\n        \"room_id\": 1,\n        \"inviter_id\": 1,\n        \"invitee_id\":2\n    }\n}\n</code></pre>"},{"location":"API/websocket/#_91","title":"\u54cd\u5e94","text":"<pre><code>{\n    \"op\": 28,\n    \"data\": {\n        \"room_id\": 1,\n        \"inviter_id\": 1,\n        \"invitee_id\":2,\n        \"time\":\"\",\n        \"related_message\":\"... \u8bf7\u6c42\u9080\u8bf7 ... \u8fdb\u5165\u7fa4\u804a\"\n    }\n}\n</code></pre>"}]}